version: 2
models: 
  - name: mart_linkage__sim
    description: Tabela contendo os CPFs recuperados através de técnicas de fuzzy matching (levenshtein & jaccard) contra as bases de pacientes do HCI.
    columns:
      - name: id_base
        description: Hash do ID da Declaração de Óbito do paciente.
        data_tests:
          - not_null
      - name: id_paciente
        description: Identificador anônimo do paciente.
          - not_null
      - name: data_nascimento_base
        description: Data de nascimento do paciente no SIM.
        policy_tags:
          - '{{ var ("TAG_PUBLICO_DATA_NASCIMENTO") }}'
      - name: data_nascimento_fonte
        description: Data de nascimento do paciente no HCI.
        policy_tags:
          - '{{ var ("TAG_PUBLICO_DATA_NASCIMENTO") }}'
      - name: nome_base
        description: Nome do paciente no SIM.
        policy_tags:
          - '{{ var ("TAG_PUBLICO_NOME") }}'
      - name: nome_fonte
        description: Nome do paciente no HCI.
        policy_tags:
          - '{{ var ("TAG_PUBLICO_NOME") }}'
      - name: nome_mae_base
        description: Nome da mãe do paciente no SIM.
        policy_tags:
          - '{{ var ("TAG_PUBLICO_NOME_MAE") }}'
      - name: nome_mae_fonte
        description: Nome da mãe do paciente no HCI.
        policy_tags:
          - '{{ var ("TAG_PUBLICO_NOME_MAE") }}'
      - name: cpf_base
        description: CPF do paciente no SIM.
        policy_tags:
          - '{{ var ("TAG_PUBLICO_CPF") }}'
        data_tests:
          - not_null
      - name: cpf_fonte
        description: CPF do paciente no HCI.
        policy_tags:
          - '{{ var ("TAG_PUBLICO_CPF") }}'
        data_tests:
          - not_null
      - name: tipo_linkage
        description: Tipo de linkage utilizado.
      - name: score_final
        description: Score final do fuzzy matching, calculado como a média dos scores Levenshtein e Jaccard, para o nome do paciente e da mãe.