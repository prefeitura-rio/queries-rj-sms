version: 2

models:
  - name: raw_biomega__solicitacoes
    description: Tabela contendo informações detalhadas sobre as solicitações de exames
    columns:
      - name: id_solicitacao
        description: Identificador único da solicitação de exame
        data_type: string
        data_tests:
          - unique:
              name: raw_biomega__solicitacoes__id_solicitacao__unique
          - not_null:
              name: raw_biomega__solicitacoes__id_solicitacao__not_null
      - name: laudo_link
        description: Link para acesso ao laudo completo
      - name: codigo_lis
        description: Identificador chave da solicitação do sistema
        data_type: string
        data_tests:
          - unique:
              name: raw_biomega__solicitacoes__codigo_lis__unique
          - not_null:
              name: raw_biomega__solicitacoes__codigo_lis__not_null
      - name: codigo_apoio
        description: Número da solicitação do sistema 
      - name: codigo_unidade
        description: Código da unidade que fez a solicitação
      - name: codigo_origem
        description: Código da origem da solicitação do sistema
      - name: unidade
        description: Nome da unidade que fez a solicitação
      - name: origem
        description: Nome da origem que fez a solicitação
      - name: pedido_datahora
        description: Data e hora em que a solicitação foi registrada.
      - name: status
        description: Status atual da solicitação (e.g., pendente, em análise).
      - name: mensagem
        description: Mensagens ou observações relacionadas à solicitação.
      - name: alterado
        description: Indica se a solicitação sofreu alguma alteração.
      - name: autorizacao
        description: Número de autorização do convênio, se aplicável.
      - name: responsavel_tecnico_crm
        description: CRM do responsável técnico pela solicitação.
        policy_tags:
          - '{{ var("TAG_CONSELHO_DE_CLASSE") }}'
      - name: responsavel_tecnico_nome
        description: Nome do responsável técnico.
        policy_tags:
          - '{{ var("TAG_NOME") }}'
      - name: paciente_codigo_lis
        description: Identificador chave do paciente
        policy_tags:
          - '{{ var("TAG_DADO_CLINICO") }}'
      - name: paciente_nome
        description: Nome completo do paciente
        policy_tags:
          - '{{ var("TAG_NOME") }}'
      - name: paciente_nascimento_data
        description: Data de nascimento do paciente
        policy_tags:
          - '{{ var("TAG_DATA_NASCIMENTO") }}'
      - name: paciente_sexo
        description: Sexo do paciente ('male' ou 'female').
      - name: paciente_cpf
        description: CPF do paciente.
        policy_tags:
          - '{{ var("TAG_CPF") }}'
      - name: paciente_cns
        description: Código Nacional de Saúde (CNS) do paciente.
        policy_tags:
          - '{{ var("TAG_CNS") }}'
      - name: paciente_nome_mae
        description: Nome completo da mãe do paciente.
        policy_tags:
          - '{{ var("TAG_NOME_MAE") }}'
      - name: lote_identificador_lis
        description: Identificador do lote no LIS.
      - name: lote_criacao_lis
        description: Data de criação do lote no LIS.
      - name: lote_criacao_apoio
        description: Data de criação do lote no sistema de apoio.
      - name: lote_codigo_lis
        description: Código do lote no LIS.
      - name: lote_origem_lis
        description: Origem do lote no LIS.
      - name: loaded_at
        description: Data e hora em que o registro foi carregado no datalake.
      - name: pedido_data_particao
        description: Coluna particionada usando a data do pedido