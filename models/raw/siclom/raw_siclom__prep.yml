version: 2

models:
  - name: raw_siclom__prep
    description: "Tabela de dispensação de Profilaxia Pré-Exposição (PrEP) ao HIV do sistema SICLOM. Contém informações sobre o paciente, a dispensação, fatores de risco e a prescrição."
    columns:
      # Controle
      - name: paginacao_total
        description: "Total de registros na paginação da API."
      - name: paginacao_linha
        description: "Número da linha na paginação da API."
      - name: id_dispensacao
        description: "Identificador único da dispensação no sistema SICLOM."
        policy_tags:
          - '{{ var("TAG_IDENTIFICADOR_SISTEMA") }}'
      - name: id_solicitacao
        description: "Identificador único da solicitação no sistema SICLOM."
        policy_tags:
          - '{{ var("TAG_IDENTIFICADOR_SISTEMA") }}'

      # Unidade Dispensadora
      - name: unidade_dispensadora
        description: "Nome da unidade que dispensou o medicamento."
      - name: unidade_dispensadora_municipio
        description: "Município da unidade dispensadora."
      - name: unidade_dispensadora_uf
        description: "UF da unidade dispensadora."
      - name: servico_atendimento
        description: "Tipo de serviço de atendimento."
      - name: esfera_atendimento
        description: "Esfera do atendimento (pública ou privada)."

      # Identificação do Paciente
      - name: paciente_cpf
        description: "CPF do paciente."
        policy_tags:
          - '{{ var("TAG_CPF") }}'
      - name: paciente_nome
        description: "Nome civil do paciente."
        policy_tags:
          - '{{ var("TAG_NOME") }}'
      - name: paciente_nome_social
        description: "Nome social do paciente."
        policy_tags:
          - '{{ var("TAG_NOME") }}'
      - name: genero
        description: "Gênero autodeclarado pelo paciente."

      # Fatores de Risco
      - name: participante_estudo_vacina
        description: "Indica se o paciente é participante de estudo de vacina."
        policy_tags:
          - '{{ var("TAG_DADO_CLINICO") }}'
      - name: dinheiro_sexo
        description: "Indica se o paciente relata receber dinheiro por sexo."
        policy_tags:
          - '{{ var("TAG_DADO_CLINICO") }}'
      - name: droga_injetavel
        description: "Indica se o paciente faz uso de drogas injetáveis."
        policy_tags:
          - '{{ var("TAG_DADO_CLINICO") }}'
      - name: substancias_psicoativas
        description: "Indica se o paciente faz uso de substâncias psicoativas."
        policy_tags:
          - '{{ var("TAG_DADO_CLINICO") }}'

      # Prescrição
      - name: modalidade
        description: "Modalidade da prescrição de PrEP (ex: Contínua, Sob Demanda)."
      - name: esquema_prep
        description: "Descrição do esquema de PrEP prescrito."
      - name: autoteste_quantidade
        description: "Quantidade de autotestes de HIV fornecidos na dispensação."
      - name: duracao
        description: "Duração do tratamento prescrito em dias."
      - name: dispensacao_solicitacao_data
        description: "Data da solicitação da dispensação."

      # Campos de Controle
      - name: extraido_em
        description: "Data/hora de extração do dado da fonte."
      - name: data_particao
        description: "Data de partição da tabela, baseada na data de extração."