version: 2

models:
  - name: raw_prontuario_vitai__internacao
    tests:
    - dbt_utils.recency:
        datepart: day
        field: "cast(saida_data as timestamp)"
        interval: 1
        config:
          severity: warn
    description: >
      Tabela contendo informações detalhadas sobre as internações realizados nos estabelecimentos de saúde.
    columns:
      - name: gid
        description: Identificador único da internação.
      - name: gid_boletim
        description: Identificador único do boletim associado a internação.
      - name: gid_paciente
        description: Identificador único do paciente associado ao internação.
        policy_tags:
          - '{{ var("TAG_IDENTIFICADOR_SISTEMA") }}'
      - name: gid_estabelecimento
        description: Identificador único do estabelecimento de saúde onde ocorreu a internação.
      - name: gid_profissional
        description: Identificador único do profissional responsável pela internação.      
      - name: id_procedimento
        description: Identificador do procedimento realizado.
      - name: id_diagnostico
        description: Identificador do diagnotico.
      - name: internacao_tipo
        description: Descricao do tipo de internação realizada.
      - name: especialidade
        description: Descricao da especialidade de internação realizada.
      - name: cpf
        policy_tags:
          - '{{ var("TAG_CPF") }}'
        description: CPF do paciente internado.
      - name: cns
        policy_tags:
          - '{{ var("TAG_CNS") }}'
        description: CNS do paciente internado.
      - name: procedimento_nome
        description: Descrição do procedimento realizado.
      - name: profissional_nome
        description: Nome do profissional responsável pela internação.
      - name: diagnostico_descricao
        description: Descrição do diagnostico realizado.
      - name: saida_data
        description: Data de saída do paciente.
      - name: internacao_data
        description: Data de internação do paciente.
      - name: cliente
        description: Nome ou identificação do cliente associado ao relato cirúrgico.
      - name: base_url
        description: URL base relacionada ao sistema do relato cirúrgico.
      - name: updated_at
        description: Data e hora da última atualização do relato cirúrgico.
      - name: imported_at
        description: Data e hora da importação dos dados para o data lake.
      - name: created_at
        description: Data e hora da criação do registro de internação.
      - name: data_particao
        description: "Data de particionamento do evento."
        data_type: date